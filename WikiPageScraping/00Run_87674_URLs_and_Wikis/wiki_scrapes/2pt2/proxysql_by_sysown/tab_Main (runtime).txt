[<div class="wiki-body gollum-markdown-content instapaper_body" id="wiki-body">
        <div class="markdown-body">
          <h2>
<a aria-hidden="true" class="anchor" href="#listing-all-tables" id="user-content-listing-all-tables"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Listing all tables</h2>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> SHOW TABLES <span class="pl-k">FROM</span> main;
<span class="pl-k">+</span><span class="pl-c"><span class="pl-c">--</span>------------------------------------------+</span>
| tables                                     |
<span class="pl-k">+</span><span class="pl-c"><span class="pl-c">--</span>------------------------------------------+</span>
| global_variables                           |
| mysql_collations                           |
| mysql_group_replication_hostgroups         |
| mysql_query_rules                          |
| mysql_replication_hostgroups               |
| mysql_servers                              |
| mysql_users                                |
| proxysql_servers                           |
| runtime_checksums_values                   |
| runtime_global_variables                   |
| runtime_mysql_group_replication_hostgroups |
| runtime_mysql_query_rules                  |
| runtime_mysql_replication_hostgroups       |
| runtime_mysql_servers                      |
| runtime_mysql_users                        |
| runtime_proxysql_servers                   |
| runtime_scheduler                          |
| scheduler                                  |
<span class="pl-k">+</span><span class="pl-c"><span class="pl-c">--</span>------------------------------------------+</span>
<span class="pl-c1">18</span> rows <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>.<span class="pl-c1">00</span> sec)</pre></div>
<h1>
<a aria-hidden="true" class="anchor" href="#key-configuration-tables" id="user-content-key-configuration-tables"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Key Configuration Tables</h1>
<ul>
<li><a href="https://github.com/sysown/proxysql/wiki/Main-(runtime)#mysql_servers">MySQL Servers</a></li>
<li><a href="https://github.com/sysown/proxysql/wiki/Main-(runtime)#mysql_replication_hostsgroups">MySQL Replication Hostgroups</a></li>
<li><a href="https://github.com/sysown/proxysql/wiki/Main-(runtime)#mysql_query_rules">MySQL Query Rules</a></li>
<li><a href="https://github.com/sysown/proxysql/wiki/Main-(runtime)#mysql_query_rules_fast_routing">MySQL Query Rules Fast Routing</a></li>
<li><a href="https://github.com/sysown/proxysql/wiki/Main-(runtime)#global_variables">Global Variables</a></li>
<li><a href="https://github.com/sysown/proxysql/wiki/Main-(runtime)#scheduler">Scheduler</a></li>
<li><a href="https://github.com/sysown/proxysql/wiki/Main-(runtime)#mysql_collations">MySQL Collations</a></li>
<li><a href="https://github.com/sysown/proxysql/wiki/Main-(runtime)#runtime-tables">Runtime Tables</a></li>
</ul>
<h3>
<a aria-hidden="true" class="anchor" href="#mysql_servers" id="user-content-mysql_servers"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>mysql_servers</h3>
<p>Table <code>mysql_servers</code> defines all the MySQL servers:</p>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> SHOW CREATE TABLE mysql_servers\G
<span class="pl-k">***************************</span> <span class="pl-c1">1</span>. row <span class="pl-k">***************************</span>
       table: mysql_servers
Create Table: CREATE TABLE mysql_servers (
    hostgroup_id <span class="pl-k">INT</span> <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    hostname <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>,
    port <span class="pl-k">INT</span> <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">3306</span>,
    status <span class="pl-k">VARCHAR</span> <span class="pl-k">CHECK</span> (<span class="pl-c1">UPPER</span>(status) <span class="pl-k">IN</span> (<span class="pl-s"><span class="pl-pds">'</span>ONLINE<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>SHUNNED<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>OFFLINE_SOFT<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>OFFLINE_HARD<span class="pl-pds">'</span></span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-s"><span class="pl-pds">'</span>ONLINE<span class="pl-pds">'</span></span>,
    weight <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (weight <span class="pl-k">&gt;=</span> <span class="pl-c1">0</span>) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">1</span>,
    compression <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (compression <span class="pl-k">&gt;=</span><span class="pl-c1">0</span> <span class="pl-k">AND</span> compression <span class="pl-k">&lt;=</span> <span class="pl-c1">102400</span>) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    max_connections <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (max_connections <span class="pl-k">&gt;=</span><span class="pl-c1">0</span>) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">1000</span>,
    max_replication_lag <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (max_replication_lag <span class="pl-k">&gt;=</span> <span class="pl-c1">0</span> <span class="pl-k">AND</span> max_replication_lag <span class="pl-k">&lt;=</span> <span class="pl-c1">126144000</span>) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    use_ssl <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (use_ssl <span class="pl-k">IN</span>(<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    max_latency_ms <span class="pl-k">INT</span> UNSIGNED <span class="pl-k">CHECK</span> (max_latency_ms<span class="pl-k">&gt;=</span><span class="pl-c1">0</span>) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    comment <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>,
    <span class="pl-k">PRIMARY KEY</span> (hostgroup_id, hostname, port) )
<span class="pl-c1">1</span> row <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>.<span class="pl-c1">00</span> sec)</pre></div>
<p>The fields have the following semantics:</p>
<ul>
<li>
<code>hostgroup_id</code>: the hostgroup in which this mysqld instance is included. Notice that the same instance can be part as more than one hostgroup</li>
<li>
<code>hostname</code>, <code>port</code>: the TCP endpoint at which the mysqld instance can be contacted</li>
<li>
<code>status</code>:
<ul>
<li>
<em>ONLINE</em> - backend server is fully operational</li>
<li>
<em>SHUNNED</em> - backend sever is temporarily taken out of use because of either too many connection errors in a time that was too short, or replication lag exceeded the allowed threshold</li>
<li>
<em>OFFLINE_SOFT</em> - when a server is put into OFFLINE_SOFT mode, new incoming connections aren't accepted anymore, while the existing connections are kept until they became inactive. In other words, connections are kept in use until the current transaction is completed. This allows to gracefully detach a backend</li>
<li>
<em>OFFLINE_HARD</em> - when a server is put into OFFLINE_HARD mode, the existing connections are dropped, while new incoming connections aren't accepted either. This is equivalent to deleting the server from a hostgroup, or temporarily taking it out of the hostgroup for maintenance work</li>
</ul>
</li>
<li>
<code>weight</code> - the bigger the weight of a server relative to other weights, the higher the probability of the server to be chosen from a hostgroup</li>
<li>
<code>compression</code> - if the value is greater than 0, new connections to that server will use compression</li>
<li>
<code>max_connections</code> - the maximum number of connections ProxySQL will open to this backend server. Even though this server will have the highest weight, no new connections will be opened to it once this limit is hit. Please ensure that the backend is configured with a correct value of max_connections to avoid that ProxySQL will try to go beyond that limit</li>
<li>
<code>max_replication_lag</code> - if greater and 0, ProxySQL will reguarly monitor replication lag and if it goes beyond such threshold it will temporary shun the host until replication catch ups</li>
<li>
<code>use_ssl</code> - if set to 1, connections to the backend will use SSL</li>
<li>
<code>max_latency_ms</code> - ping time is regularly monitored. If a host has a ping time greater than <code>max_latency_ms</code> it is excluded from the connection pool (although the server stays <em>ONLINE</em>)</li>
<li>
<code>comment</code> - text field that can be used for any purposed defined by the user. Could be a description of what the host stores, a reminder of when the host was added or disabled, or a JSON processed by some checker script.</li>
</ul>
<h3>
<a aria-hidden="true" class="anchor" href="#mysql_replication_hostgroups" id="user-content-mysql_replication_hostgroups"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>mysql_replication_hostgroups</h3>
<p>Table <code>mysql_replication_hostgroups</code> defines <a href="https://github.com/sysown/proxysql/blob/master/doc/admin_tables.md#mysql_replication_hostgroups">replication hostgroups</a>.</p>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> SHOW CREATE TABLE mysql_replication_hostgroups\G
<span class="pl-k">***************************</span> <span class="pl-c1">1</span>. row <span class="pl-k">***************************</span>
       table: mysql_replication_hostgroups
Create Table: CREATE TABLE mysql_replication_hostgroups (
    writer_hostgroup <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (writer_hostgroup<span class="pl-k">&gt;=</span><span class="pl-c1">0</span>) <span class="pl-k">NOT NULL</span> <span class="pl-k">PRIMARY KEY</span>,
    reader_hostgroup <span class="pl-k">INT</span> <span class="pl-k">NOT NULL</span> <span class="pl-k">CHECK</span> (reader_hostgroup<span class="pl-k">&lt;&gt;</span>writer_hostgroup <span class="pl-k">AND</span> reader_hostgroup<span class="pl-k">&gt;</span><span class="pl-c1">0</span>),
    comment <span class="pl-k">VARCHAR</span>,
    UNIQUE (reader_hostgroup))
<span class="pl-c1">1</span> row <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>.<span class="pl-c1">00</span> sec)</pre></div>
<p>Each row in mysql_replication_hostgroups represent a pair of writer_hostgroup and reader_hostgroup .
ProxySQL will monitor the value of <code>read_only</code> for all the servers in specified hostgroups, and based on the value of <code>read_only</code> will assign the server to the writer or reader hostgroups.
The field comment can be used to store any arbitrary data.</p>
<h3>
<a aria-hidden="true" class="anchor" href="#mysql_users" id="user-content-mysql_users"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>mysql_users</h3>
<p>Table <code>mysql_users</code> defines MySQL users, used to connect to backends.</p>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> SHOW CREATE TABLE mysql_users\G
<span class="pl-k">***************************</span> <span class="pl-c1">1</span>. row <span class="pl-k">***************************</span>
       table: mysql_users
Create Table: CREATE TABLE mysql_users (
    username <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>,
    password <span class="pl-k">VARCHAR</span>,
    active <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (active <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">1</span>,
    use_ssl <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (use_ssl <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    default_hostgroup <span class="pl-k">INT</span> <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    default_schema <span class="pl-k">VARCHAR</span>,
    schema_locked <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (schema_locked <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    transaction_persistent <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (transaction_persistent <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    fast_forward <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (fast_forward <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    backend <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (backend <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">1</span>,
    frontend <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (frontend <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">1</span>,
    max_connections <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (max_connections <span class="pl-k">&gt;=</span><span class="pl-c1">0</span>) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">10000</span>,
    <span class="pl-k">PRIMARY KEY</span> (username, backend),
    UNIQUE (username, frontend))
<span class="pl-c1">1</span> row <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>.<span class="pl-c1">00</span> sec)</pre></div>
<p>The fields have the following semantics:</p>
<ul>
<li>
<code>username</code>, <code>password</code> - credentials for connecting to the mysqld or ProxySQL instance. See also <a href="Password-management">Password management</a>
</li>
<li>
<code>active</code> - the users with active = 0 will be tracked in the database, but will be never loaded in the in-memory data structures</li>
<li>
<code>default_hostgroup</code> - if there is no matching rule for the queries send by this users, the traffic is generates is sent to the specified hostgroup</li>
<li>
<code>default_schema</code> - the schema to which the connection should change by default</li>
<li>
<code>schema_locked</code> - not supported yet (TODO: check)</li>
<li>
<code>transaction_persistent</code> - if this is set for the user with which the MySQL client is connecting to ProxySQL (thus a "frontend" user - see below), transactions started within a hostgroup will remain within that hostgroup regardless of any other rules</li>
<li>
<code>fast_forward</code> - if set it bypass the query processing layer (rewriting, caching) and pass through the query directly as is to the backend server.</li>
<li>
<code>frontend</code> - if set to 1, this (username, password) pair is used for authenticating to the ProxySQL instance</li>
<li>
<code>backend</code> - if set to 1, this (username, password) pair is used for authenticating to the mysqld servers against any hostgroup</li>
</ul>
<p>Note, currently all users need both "frontend" and "backend" set to 1 . Future versions of ProxySQL will separate the crendentials between frontend and backend. In this way frontend will never know the credential to connect directly to the backend, forcing all the connection through ProxySQL and increasing the security of the system.</p>
<p>Fast forward notes:</p>
<ul>
<li>it doesn't require a different port : full features proxy logic and "fast forward" logic is implemented in the same code/module</li>
<li>fast forward is implemented on a per-user basis : depending from the user that connects to ProxySQL , fast forward is enabled or disabled</li>
<li>fast forward algorithm is enabled after authentication : the client still authenticates to ProxySQL, and ProxySQL will create a connection when the client will start sending traffic. This means that connections' errors are still handled during connect phase.</li>
<li>fast forward does NOT support SSL</li>
<li>if using compression, it must be enabled in both ends</li>
</ul>
<p>Note: users in <code>mysql_users</code> shouldn't be used also for <code>admin-admin_credentials</code> and <code>admin-stats_credentials</code></p>
<h3>
<a aria-hidden="true" class="anchor" href="#mysql_query_rules" id="user-content-mysql_query_rules"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>mysql_query_rules</h3>
<p>Table <code>mysql_query_rules</code> defines routing policies and attributes.</p>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> SHOW CREATE TABLE mysql_query_rules\G
<span class="pl-k">***************************</span> <span class="pl-c1">1</span>. row <span class="pl-k">***************************</span>
       table: mysql_query_rules
Create Table: CREATE TABLE mysql_query_rules (
    rule_id <span class="pl-k">INTEGER</span> <span class="pl-k">PRIMARY KEY</span> AUTOINCREMENT <span class="pl-k">NOT NULL</span>,
    active <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (active <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    username <span class="pl-k">VARCHAR</span>,
    schemaname <span class="pl-k">VARCHAR</span>,
    flagIN <span class="pl-k">INT</span> <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    client_addr <span class="pl-k">VARCHAR</span>,
    proxy_addr <span class="pl-k">VARCHAR</span>,
    proxy_port <span class="pl-k">INT</span>,
    digest <span class="pl-k">VARCHAR</span>,
    match_digest <span class="pl-k">VARCHAR</span>,
    match_pattern <span class="pl-k">VARCHAR</span>,
    negate_match_pattern <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (negate_match_pattern <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    re_modifiers <span class="pl-k">VARCHAR</span> DEFAULT <span class="pl-s"><span class="pl-pds">'</span>CASELESS<span class="pl-pds">'</span></span>,
    flagOUT <span class="pl-k">INT</span>,
    replace_pattern <span class="pl-k">VARCHAR</span>,
    destination_hostgroup <span class="pl-k">INT</span> DEFAULT <span class="pl-k">NULL</span>,
    cache_ttl <span class="pl-k">INT</span> <span class="pl-k">CHECK</span>(cache_ttl <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>),
    reconnect <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (reconnect <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) DEFAULT <span class="pl-k">NULL</span>,
    timeout <span class="pl-k">INT</span> UNSIGNED,
    retries <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (retries<span class="pl-k">&gt;=</span><span class="pl-c1">0</span> <span class="pl-k">AND</span> retries <span class="pl-k">&lt;=</span><span class="pl-c1">1000</span>),
    delay <span class="pl-k">INT</span> UNSIGNED,
    mirror_flagOUT <span class="pl-k">INT</span> UNSIGNED,
    mirror_hostgroup <span class="pl-k">INT</span> UNSIGNED,
    error_msg <span class="pl-k">VARCHAR</span>,
    sticky_conn <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (sticky_conn <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)),
    multiplex <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (multiplex <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)),
    log <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (log <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)),
    apply <span class="pl-k">INT</span> <span class="pl-k">CHECK</span>(apply <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    comment <span class="pl-k">VARCHAR</span>)
<span class="pl-c1">1</span> row <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>.<span class="pl-c1">00</span> sec)</pre></div>
<p>The fields have the following semantics:</p>
<ul>
<li>
<code>rule_id</code> - the unique id of the rule. Rules are processed in rule_id order</li>
<li>
<code>active</code> - only rules with active=1 will be considered by the query processing module and only active rules are loaded into runtime.</li>
<li>
<code>username</code> - filtering criteria matching username. If is non-NULL, a query will match only if the connection is made with the correct username</li>
<li>
<code>schemaname</code> - filtering criteria matching schemaname. If is non-NULL, a query will match only if the connection uses <code>schemaname</code> as default schema (in mariadb/mysql schemaname is equivalent to databasename)</li>
<li>
<code>flagIN</code>, <code>flagOUT</code>, <code>apply</code> - these allow us to create "chains of rules" that get applied one after the other. An input flag value is set to 0, and only rules with flagIN=0 are considered at the beginning. When a matching rule is found for a specific query, flagOUT is evaluated and if NOT NULL the query will be flagged with the specified flag in flagOUT. If flagOUT differs from flagIN , the query will exit the current chain and enters a new chain of rules having flagIN as the new input flag. If flagOUT matches flagIN, the query will be re-evaluate again against the first rule with said flagIN. This happens until there are no more matching rules, or apply is set to 1 (which means this is the last rule to be applied)</li>
<li>
<code>client_addr</code> - match traffic from a specific source</li>
<li>
<code>proxy_addr</code> - match incoming traffic on a specific local IP</li>
<li>
<code>proxy_port</code> - match incoming traffic on a specific local port</li>
<li>
<code>digest</code> - match queries with a specific digest, as returned by <code>stats_mysql_query_digest</code>.<code>digest</code>
</li>
<li>
<code>match_digest</code> - regular expression that matches the query digest. See also <a href="Global-variables#mysql-query_processor_regex">mysql-query_processor_regex</a>
</li>
<li>
<code>match_pattern</code> - regular expression that matches the query text. See also <a href="Global-variables#mysql-query_processor_regex">mysql-query_processor_regex</a>
</li>
<li>
<code>negate_match_pattern</code> - if this is set to 1, only queries not matching the query text will be considered as a match. This acts as a NOT operator in front of the regular expression matching against <code>match_pattern</code> or <code>match_digest</code>
</li>
<li>
<code>re_modifiers</code> - comma separated list of options to modify the behavior of the RE engine. With <code>CASELESS</code> the match is case insensitive. With <code>GLOBAL</code> the replace is global (replaces all matches and not just the first). For backward compatibility, only <code>CASELESS</code> is the enabled by default. See also <a href="Global-variables#mysql-query_processor_regex">mysql-query_processor_regex</a> for more details.</li>
<li>
<code>replace_pattern</code> - this is the pattern with which to replace the matched pattern. It's done using RE2::Replace, so it's worth taking a look at the online documentation for that: <a href="https://github.com/google/re2/blob/master/re2/re2.h#L378">https://github.com/google/re2/blob/master/re2/re2.h#L378</a>. Note that this is optional, and when this is missing, the query processor will only cache, route, or set other parameters without rewriting.</li>
<li>
<code>destination_hostgroup</code> - route matched queries to this hostgroup. This happens unless there is a started transaction and the logged in user has the transaction_persistent flag set to 1 (see <code>mysql_users</code> table).</li>
<li>
<code>cache_ttl</code> - the number of milliseconds for which to cache the result of the query. Note: in ProxySQL 1.1 cache_ttl was in seconds</li>
<li>
<code>reconnect</code> - feature not used</li>
<li>
<code>timeout</code> - the maximum timeout in milliseconds with which the matched or rewritten query should be executed. If a query run for longer than the specific threshold, the query is automatically killed. If timeout is not specified, global variable <code>mysql-default_query_timeout</code> applies</li>
<li>
<code>retries</code> - the maximum number of times a query needs to be re-executed in case of detected failure during the execution of the query. If retries is not specified, global variable <code>mysql-query_retries_on_failure</code> applies</li>
<li>
<code>delay</code> - number of milliseconds to delay the execution of the query. This is essentially a throttling mechanism and QoS, allowing to give priority to some queries instead of others. This value is added to the <code>mysql-default_query_delay</code> global variable that applies to all queries. Future version of ProxySQL will provide a more advanced throttling mechanism.</li>
<li>
<code>mirror_flagOUT</code> and <code>mirror_hostgroup</code> - setting related to <a href="./mirroring.md">mirroring</a> .</li>
<li>
<code>error_msg</code> - query will be blocked, and the specified <code>error_msg</code> will be returned to the client</li>
<li>
<code>sticky_conn</code> - not implemented yet</li>
<li>
<code>multiplex</code> - If 0, multiplex will be disabled. If 1, multiplex could be re-enabled if there are is not any other conditions preventing this (like user variables or transactions). If 2, multiplexing is not disabled for just the current query. See <a href="./Multiplexing#ad-hoc-enabledisable-of-multiplexing">wiki</a> Default is <code>NULL</code>, thus not modifying multiplexing policies</li>
<li>
<code>log</code> - query will be logged</li>
<li>
<code>apply</code> - when set to <code>1</code> no further queries will be evaluated after this rule is matched and processed (note: <code>mysql_query_rules_fast_routing</code> rules will not be evaluated afterwards)</li>
<li>
<code>comment</code> - free form text field, usable for a descriptive comment of the query rule</li>
</ul>
<h3>
<a aria-hidden="true" class="anchor" href="#mysql_query_rules_fast_routing" id="user-content-mysql_query_rules_fast_routing"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>mysql_query_rules_fast_routing</h3>
<p>Table <code>mysql_query_rules_fast_routing</code> is an extension of mysql_query_rules and is evaluated afterwards for fast routing policies and attributes (<strong>only available in ProxySQL 1.4.7+</strong>).</p>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> SHOW CREATE TABLE mysql_query_rules_fast_routing\G
<span class="pl-k">***************************</span> <span class="pl-c1">1</span>. row <span class="pl-k">***************************</span>
       table: mysql_query_rules_fast_routing
Create Table: CREATE TABLE mysql_query_rules_fast_routing (
    username <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>,
    schemaname <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>,
    flagIN <span class="pl-k">INT</span> <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">0</span>,
    destination_hostgroup <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (destination_hostgroup <span class="pl-k">&gt;=</span> <span class="pl-c1">0</span>) <span class="pl-k">NOT NULL</span>,
    comment <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>,
    <span class="pl-k">PRIMARY KEY</span> (username, schemaname, flagIN) )
<span class="pl-c1">1</span> row <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>,<span class="pl-c1">00</span> sec)</pre></div>
<p>The fields have the following semantics:</p>
<ul>
<li>
<code>username</code> - filtering criteria matching username, a query will match only if the connection is made with the correct username</li>
<li>
<code>schemaname</code> - filtering criteria matching schemaname, a query will match only if the connection uses <code>schemaname</code> as default schema (in mariadb/mysql schemaname this is equivalent to databasename)</li>
<li>
<code>flagIN</code> - evaluated in the same way as <code>flagin</code> is in <code>mysql_query_rules</code> and correlates to the <code>flagout</code> / <code>apply</code> specified in the <code>mysql_query_rules</code> table</li>
<li>
<code>destination_hostgroup</code> - route matched queries to this hostgroup. This happens unless there is a started transaction and the logged in user has the transaction_persistent flag set to 1 (see <code>mysql_users</code> table)</li>
<li>
<code>comment</code> - free form text field, usable for a descriptive comment of the query rule</li>
</ul>
<h3>
<a aria-hidden="true" class="anchor" href="#global_variables" id="user-content-global_variables"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>global_variables</h3>
<p>The table <code>global_variables</code> defines <a href="Global-variables">Global variables</a>. This is a much simpler table, essentially a key-value store. These are global variables used by ProxySQL and are useful in order to tweak its behaviour.</p>
<p>Global variables are grouped in classes based on their prefix.
Currently there are 2 classes of global variables, although more classes are in the roadmap:</p>
<ul>
<li>variables prefixed with <code>admin-</code> are relevant for Admin module allow tweaking of the admin interface E.G. changing the admin interface (<code>admin-mysql_ifaces</code>) or admin credentials (<code>admin-admin_credentials</code>)</li>
<li>variables prefixed with <code>mysql-</code> are relevant for MySQL modules allow tweaking of MySQL-related features. Specifically they include tuning of variables related to:
<ul>
<li>handling of MySQL traffic</li>
<li>monitor operatations (further prefixed with <code>mysql-monitor_</code>)</li>
<li>query caching</li>
</ul>
</li>
</ul>
<p>For more information about particular variables, please see the dedicated section on <a href="global_variables.md">global variables</a></p>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> SHOW CREATE TABLE global_variables\G
<span class="pl-k">***************************</span> <span class="pl-c1">1</span>. row <span class="pl-k">***************************</span>
       table: global_variables
Create Table: CREATE TABLE global_variables (
    variable_name <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span> <span class="pl-k">PRIMARY KEY</span>,
    variable_value <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>)
<span class="pl-c1">1</span> row <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>.<span class="pl-c1">00</span> sec)</pre></div>
<p>For reference, an example of how <code>global_variables</code> looks at the time of writing (version 1.2.4):</p>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> <span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> global_variables <span class="pl-k">ORDER BY</span> variable_name;
<span class="pl-k">+</span><span class="pl-c"><span class="pl-c">--</span>--------------------------------------+-------------------------------------------------------------+</span>
| variable_name                          | variable_value                                              |
<span class="pl-k">+</span><span class="pl-c"><span class="pl-c">--</span>--------------------------------------+-------------------------------------------------------------+</span>
| admin<span class="pl-k">-</span>admin_credentials                | admin:admin                                                 |
| admin<span class="pl-k">-</span>hash_passwords                   | true                                                        |
| admin<span class="pl-k">-</span>mysql_ifaces                     | <span class="pl-c1">0</span>.<span class="pl-c1">0</span>.<span class="pl-c1">0</span>.<span class="pl-c1">0</span>:<span class="pl-c1">6032</span>                                                |
| admin<span class="pl-k">-</span>read_only                        | false                                                       |
| admin<span class="pl-k">-</span>refresh_interval                 | <span class="pl-c1">2000</span>                                                        |
| admin<span class="pl-k">-</span>stats_credentials                | stats:stats                                                 |
| admin<span class="pl-k">-</span>telnet_admin_ifaces              | (<span class="pl-k">null</span>)                                                      |
| admin<span class="pl-k">-</span>telnet_stats_ifaces              | (<span class="pl-k">null</span>)                                                      |
| admin<span class="pl-k">-</span>version                          | <span class="pl-c1">1</span>.<span class="pl-c1">2</span>.<span class="pl-c1">4</span>.<span class="pl-c1">0923</span>                                                  |
| mysql<span class="pl-k">-</span>client_found_rows                | true                                                        |
| mysql<span class="pl-k">-</span>commands_stats                   | true                                                        |
| mysql<span class="pl-k">-</span>connect_retries_delay            | <span class="pl-c1">1</span>                                                           |
| mysql<span class="pl-k">-</span>connect_retries_on_failure       | <span class="pl-c1">5</span>                                                           |
| mysql<span class="pl-k">-</span>connect_timeout_server           | <span class="pl-c1">10000</span>                                                       |
| mysql<span class="pl-k">-</span>connect_timeout_server_max       | <span class="pl-c1">10000</span>                                                       |
| mysql<span class="pl-k">-</span>connection_max_age_ms            | <span class="pl-c1">0</span>                                                           |
| mysql<span class="pl-k">-</span>default_charset                  | utf8                                                        |
| mysql<span class="pl-k">-</span>default_max_latency_ms           | <span class="pl-c1">1000</span>                                                        |
| mysql<span class="pl-k">-</span>default_query_delay              | <span class="pl-c1">0</span>                                                           |
| mysql<span class="pl-k">-</span>default_query_timeout            | <span class="pl-c1">10000</span>                                                       |
| mysql<span class="pl-k">-</span>default_reconnect                | true                                                        |
| mysql<span class="pl-k">-</span>default_schema                   | information_schema                                          |
| mysql<span class="pl-k">-</span>enforce_autocommit_on_reads      | false                                                       |
| mysql<span class="pl-k">-</span>eventslog_filename               | <span class="pl-c1">file1</span>.<span class="pl-c1">log</span>                                                   |
| mysql<span class="pl-k">-</span>eventslog_filesize               | <span class="pl-c1">104857600</span>                                                   |
| mysql<span class="pl-k">-</span>free_connections_pct             | <span class="pl-c1">100</span>                                                         |
| mysql<span class="pl-k">-</span>have_compress                    | true                                                        |
| mysql<span class="pl-k">-</span>init_connect                     | (<span class="pl-k">null</span>)                                                      |
| mysql<span class="pl-k">-</span>interfaces                       | <span class="pl-c1">0</span>.<span class="pl-c1">0</span>.<span class="pl-c1">0</span>.<span class="pl-c1">0</span>:<span class="pl-c1">6033</span>                                                |
| mysql<span class="pl-k">-</span>long_query_time                  | <span class="pl-c1">1000</span>                                                        |
| mysql<span class="pl-k">-</span>max_allowed_packet               | <span class="pl-c1">4194304</span>                                                     |
| mysql<span class="pl-k">-</span>max_connections                  | <span class="pl-c1">2048</span>                                                        |
| mysql<span class="pl-k">-</span>max_transaction_time             | <span class="pl-c1">14400000</span>                                                    |
| mysql<span class="pl-k">-</span>monitor_connect_interval         | <span class="pl-c1">200000</span>                                                      |
| mysql<span class="pl-k">-</span>monitor_connect_timeout          | <span class="pl-c1">500</span>                                                         |
| mysql<span class="pl-k">-</span>monitor_enabled                  | true                                                        |
| mysql<span class="pl-k">-</span>monitor_history                  | <span class="pl-c1">60000</span>                                                       |
| mysql<span class="pl-k">-</span>monitor_password                 | monitor                                                     |
| mysql<span class="pl-k">-</span>monitor_ping_interval            | <span class="pl-c1">200000</span>                                                      |
| mysql<span class="pl-k">-</span>monitor_ping_max_failures        | <span class="pl-c1">3</span>                                                           |
| mysql<span class="pl-k">-</span>monitor_ping_timeout             | <span class="pl-c1">500</span>                                                         |
| mysql<span class="pl-k">-</span>monitor_query_interval           | <span class="pl-c1">60000</span>                                                       |
| mysql<span class="pl-k">-</span>monitor_query_timeout            | <span class="pl-c1">100</span>                                                         |
| mysql<span class="pl-k">-</span>monitor_read_only_interval       | <span class="pl-c1">1000</span>                                                        |
| mysql<span class="pl-k">-</span>monitor_read_only_timeout        | <span class="pl-c1">100</span>                                                         |
| mysql<span class="pl-k">-</span>monitor_replication_lag_interval | <span class="pl-c1">10000</span>                                                       |
| mysql<span class="pl-k">-</span>monitor_replication_lag_timeout  | <span class="pl-c1">1000</span>                                                        |
| mysql<span class="pl-k">-</span>monitor_slave_lag_when_null      | <span class="pl-c1">60</span>                                                          |
| mysql<span class="pl-k">-</span>monitor_username                 | monitor                                                     |
| mysql<span class="pl-k">-</span>monitor_writer_is_also_reader    | true                                                        |
| mysql<span class="pl-k">-</span>multiplexing                     | true                                                        |
| mysql<span class="pl-k">-</span>ping_interval_server_msec        | <span class="pl-c1">10000</span>                                                       |
| mysql<span class="pl-k">-</span>ping_timeout_server              | <span class="pl-c1">200</span>                                                         |
| mysql<span class="pl-k">-</span>poll_timeout                     | <span class="pl-c1">2000</span>                                                        |
| mysql<span class="pl-k">-</span>poll_timeout_on_failure          | <span class="pl-c1">100</span>                                                         |
| mysql<span class="pl-k">-</span>query_cache_size_MB              | <span class="pl-c1">512</span>                                                         |
| mysql<span class="pl-k">-</span>query_digests                    | true                                                        |
| mysql<span class="pl-k">-</span>query_processor_iterations       | <span class="pl-c1">0</span>                                                           |
| mysql<span class="pl-k">-</span>query_retries_on_failure         | <span class="pl-c1">1</span>                                                           |
| mysql<span class="pl-k">-</span>server_capabilities              | <span class="pl-c1">47626</span>                                                       |
| mysql<span class="pl-k">-</span>server_version                   | <span class="pl-c1">5</span>.<span class="pl-c1">5</span>.<span class="pl-c1">30</span>                                                      |
| mysql<span class="pl-k">-</span>servers_stats                    | true                                                        |
| mysql<span class="pl-k">-</span>session_debug                    | (<span class="pl-k">null</span>)                                                      |
| mysql<span class="pl-k">-</span>sessions_sort                    | true                                                        |
| mysql<span class="pl-k">-</span>shun_on_failures                 | <span class="pl-c1">5</span>                                                           |
| mysql<span class="pl-k">-</span>shun_recovery_time_sec           | <span class="pl-c1">10</span>                                                          |
| mysql<span class="pl-k">-</span>ssl_p2s_ca                       | <span class="pl-k">/</span>home<span class="pl-k">/</span>vagrant<span class="pl-k">/</span>sandboxes<span class="pl-k">/</span>rsandbox_mysql<span class="pl-k">-</span>5_6_26<span class="pl-k">/</span>master<span class="pl-k">/</span><span class="pl-c1">ca</span>.<span class="pl-c1">pem</span> |
| mysql<span class="pl-k">-</span>ssl_p2s_cert                     | <span class="pl-k">/</span>home<span class="pl-k">/</span>vagrant<span class="pl-k">/</span>newcerts<span class="pl-k">/</span>client<span class="pl-k">-</span><span class="pl-c1">cert</span>.<span class="pl-c1">pem</span>                      |
| mysql<span class="pl-k">-</span>ssl_p2s_cipher                   | (<span class="pl-k">null</span>)                                                      |
| mysql<span class="pl-k">-</span>ssl_p2s_key                      | <span class="pl-k">/</span>home<span class="pl-k">/</span>vagrant<span class="pl-k">/</span>newcerts<span class="pl-k">/</span>client<span class="pl-k">-</span><span class="pl-c1">key</span>.<span class="pl-c1">pem</span>                       |
| mysql<span class="pl-k">-</span>stacksize                        | <span class="pl-c1">1048576</span>                                                     |
| mysql<span class="pl-k">-</span>threads                          | <span class="pl-c1">1</span>                                                           |
| mysql<span class="pl-k">-</span>threshold_query_length           | <span class="pl-c1">524288</span>                                                      |
| mysql<span class="pl-k">-</span>threshold_resultset_size         | <span class="pl-c1">4194304</span>                                                     |
| mysql<span class="pl-k">-</span>wait_timeout                     | <span class="pl-c1">28800000</span>                                                    |
<span class="pl-k">+</span><span class="pl-c"><span class="pl-c">--</span>--------------------------------------+-------------------------------------------------------------+</span>
<span class="pl-c1">75</span> rows <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>.<span class="pl-c1">01</span> sec)</pre></div>
<h3>
<a aria-hidden="true" class="anchor" href="#scheduler" id="user-content-scheduler"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>scheduler</h3>
<p>Table <code>scheduler</code> defines <a href="https://github.com/sysown/proxysql/blob/master/doc/admin_tables.md#scheduler">jobs</a> to be executed at regular intervals.</p>
<div class="highlight highlight-source-sql"><pre>Admin<span class="pl-k">&gt;</span> SHOW CREATE TABLE scheduler\G
<span class="pl-k">***************************</span> <span class="pl-c1">1</span>. row <span class="pl-k">***************************</span>
       table: scheduler
Create Table: CREATE TABLE scheduler (
    id <span class="pl-k">INTEGER</span> <span class="pl-k">PRIMARY KEY</span> AUTOINCREMENT <span class="pl-k">NOT NULL</span>,
    active <span class="pl-k">INT</span> <span class="pl-k">CHECK</span> (active <span class="pl-k">IN</span> (<span class="pl-c1">0</span>,<span class="pl-c1">1</span>)) <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-c1">1</span>,
    interval_ms <span class="pl-k">INTEGER</span> <span class="pl-k">CHECK</span> (interval_ms<span class="pl-k">&gt;=</span><span class="pl-c1">100</span> <span class="pl-k">AND</span> interval_ms<span class="pl-k">&lt;=</span><span class="pl-c1">100000000</span>) <span class="pl-k">NOT NULL</span>,
    filename <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>,
    arg1 <span class="pl-k">VARCHAR</span>,
    arg2 <span class="pl-k">VARCHAR</span>,
    arg3 <span class="pl-k">VARCHAR</span>,
    arg4 <span class="pl-k">VARCHAR</span>,
    arg5 <span class="pl-k">VARCHAR</span>,
    comment <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span> DEFAULT <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>)
<span class="pl-c1">1</span> row <span class="pl-k">in</span> <span class="pl-k">set</span> (<span class="pl-c1">0</span>.<span class="pl-c1">00</span> sec)</pre></div>
<p>Further details about the scheduler can be found <a href="Scheduler">here</a></p>
<h2>
<a aria-hidden="true" class="anchor" href="#mysql_collations" id="user-content-mysql_collations"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>mysql_collations</h2>
<p>Here is the statement used to create the <code>mysql_collations</code> table:</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">mysql_collations</span> (
    Id <span class="pl-k">INTEGER</span> <span class="pl-k">NOT NULL</span> <span class="pl-k">PRIMARY KEY</span>,
    Collation <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>,
    Charset <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>,
    <span class="pl-s"><span class="pl-pds">`</span>Default<span class="pl-pds">`</span></span> <span class="pl-k">VARCHAR</span> <span class="pl-k">NOT NULL</span>
)</pre></div>
<p>The available <code>(charset, collation)</code> pairs supported by ProxySQL. In principle, ProxySQL will validate that incoming connections have a supported charset, and will make sure that the pooled backend connections are switched to the correct charset before using them.</p>
<h1>
<a aria-hidden="true" class="anchor" href="#runtime-tables" id="user-content-runtime-tables"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>Runtime tables</h1>
<p>All the configuration tables listed above have a matching <code>runtime_</code> table:</p>
<ul>
<li>runtime_global_variables : runtime version of <a href="#global_variables">global_variables</a>
</li>
<li>runtime_mysql_replication_hostgroups : runtime version of <a href="#mysql_replication_hostsgroups">mysql_replication_hostsgroups</a>
</li>
<li>runtime_mysql_servers : runtime version of <a href="#mysql_servers">mysql_servers</a>
</li>
<li>runtime_mysql_users : runtime version of <a href="#mysql_users">mysql_users</a>
</li>
<li>runtime_scheduler : runtime version of <a href="#scheduler">scheduler</a>
</li>
</ul>
<h4>
<a aria-hidden="true" class="anchor" href="#a-note-on-main-schema" id="user-content-a-note-on-main-schema"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>A note on <code>main</code> schema</h4>
<p>Note that all the content of the in-memory tables (main database) are <em>lost</em> when ProxySQL is restarted if their content wasn't saved on disk database.</p>
<h1>
<a aria-hidden="true" class="anchor" href="#disk-database" id="user-content-disk-database"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z" fill-rule="evenodd"></path></svg></a>disk database</h1>
<p>The "disk" database has exactly the same tables as the "main" database (minus the <code>runtime_</code> tables), with the same semantics. The only major difference is that these tables are stored on disk, instead of being stored in-memory. Whenever ProxySQL is restarted, the in-memory "main" database will be populated starting from this database.</p>
<p>Note that all the content of the in-memory tables (main database) are <em>lost</em> when ProxySQL is restarted if their content wasn't saved on disk database.</p>

        </div>

    </div>]