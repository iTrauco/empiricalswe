[<div class="wiki-body gollum-markdown-content instapaper_body" id="wiki-body">
        <div class="markdown-body">
          <ol>
<li>Install cwRsync or any other Windows rsync client. <a href="https://www.itefix.net/cwrsync" rel="nofollow">Download</a>
</li>
<li>For every group, create a copy of the supplied cwrsync.cmd script</li>
<li>Change HOME to  <code>SET HOME=%CWRSYNCHOME%\config</code> to have the virtual linux home self contained in crwsync. This is where the .ssh dir will be created</li>
<li>Add the rsync command at the end of the file. The command can be generated by running a dry-run of snapshot-backup in linux. Otherwise, here is a sample of a typical line<br/>
<code>rsync --archive -e "ssh -o \"BatchMode yes\" -l backup -i \"/cygdrive/c/Program Files/cwRsync/config/.ssh/backupKey\"" --link-dest=../system.latest --link-dest=../quick.latest --password-file="/cygdrive/c/Program Files/cwRsync/config/rsyncd.pass" --files-from="/cygdrive/c/Program Files/cwRsync/config/include.txt" --exclude-from="/cygdrive/c/Program Files/cwRsync/config/exclude.txt" --recursive --relative --human-readable / RSYNC_user@server::RSYNC_module/client_name/system-tmp</code>
</li>
</ol>
<ul>
<li>Note the escaped "" after -e.</li>
<li>Note all backup users use the same SSH account (backup). For security reasons each client should use a different ssh-key to access the server</li>
<li>There should be a --link-dest for every other group and one for the current group</li>
<li>RSYNC_user and RSYNC_module should be the same</li>
</ul>
<ol start="5">
<li>Create a password file (hopefully as admin and non-readable to any other users) in config/rsyncd.pass with the rsync module password as configured in the server</li>
<li>Create include and exclude files. Usually 1 exclude per system and 1 include per group</li>
</ol>

        </div>

    </div>]